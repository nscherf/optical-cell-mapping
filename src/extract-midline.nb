(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 10.2' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     51096,       1235]
NotebookOptionsPosition[     46082,       1104]
NotebookOutlinePosition[     46438,       1120]
CellTagsIndexPosition[     46395,       1117]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["\<\
Cell-accurate optical mapping across the entire developing heart\
\>", "Title",
 CellChangeTimes->{{3.714798636167549*^9, 3.714798643920143*^9}, {
  3.714798712696336*^9, 3.714798738212171*^9}, {3.7151020354743443`*^9, 
  3.715102049707464*^9}},ExpressionUUID->"85ce8b24-5b1d-401d-b49e-\
f64a086b6c1e"],

Cell[BoxData[
 RowBox[{"Get", "[", 
  RowBox[{
   RowBox[{"NotebookDirectory", "[", "]"}], "<>", "\"\<functions.m\>\""}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.714753565651903*^9, 3.714753627586282*^9}, {
  3.71475374240552*^9, 
  3.714753753852852*^9}},ExpressionUUID->"f58ae2d9-733f-44f5-919b-\
113a9fcc67e0"],

Cell[BoxData[
 RowBox[{
  RowBox[{"root", "=", 
   RowBox[{"FileNameJoin", "[", 
    RowBox[{"Most", "[", 
     RowBox[{"FileNameSplit", "[", 
      RowBox[{"NotebookDirectory", "[", "]"}], "]"}], "]"}], "]"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.7150940884334507`*^9, 3.715094130164023*^9}, 
   3.715102262946281*^9},ExpressionUUID->"36e97364-8665-42be-8915-\
4ebd94f96123"],

Cell[CellGroupData[{

Cell["Tool to manually define midline of heart.", "Chapter",
 CellChangeTimes->{{3.715102052214654*^9, 3.71510207614849*^9}, {
  3.715102151584465*^9, 
  3.715102169292148*^9}},ExpressionUUID->"73c30a1f-6aac-4f7d-a755-\
78e30c5bc0e4"],

Cell[CellGroupData[{

Cell["select dataset to analyze", "Subchapter",
 CellChangeTimes->{{3.7147987676717777`*^9, 
  3.714798774375169*^9}},ExpressionUUID->"b358d265-46d4-4889-9373-\
3a73490222a4"],

Cell["\<\
We used the data from 5 different experiments for the analysis presented in \
the manuscript. An overview of the specific characteristics can be found in \
the datasheet: \[OpenCurlyQuote]datasets.xls\[CloseCurlyQuote].\
\>", "Text",
 CellChangeTimes->{{3.714799204745493*^9, 3.7147992066798887`*^9}, {
  3.714799676803508*^9, 
  3.714799758825612*^9}},ExpressionUUID->"ea25f1a9-f004-4778-9310-\
b95b0ef919fa"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"overview", " ", "=", " ", 
   RowBox[{
    RowBox[{"Import", "[", 
     RowBox[{"root", "<>", "\"\</data/datasets.xls\>\""}], "]"}], "[", 
    RowBox[{"[", "1", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"TableForm", "[", "overview", "]"}]}], "Input",
 CellChangeTimes->{{3.655478939679381*^9, 3.655478943841887*^9}, {
  3.6744588416113253`*^9, 3.6744588422202806`*^9}, {3.714754406080118*^9, 
  3.714754418749305*^9}, {3.714754861757915*^9, 3.7147548618474913`*^9}, {
  3.714755147550641*^9, 3.714755168941865*^9}, {3.715094139523484*^9, 
  3.7150941415661383`*^9}},ExpressionUUID->"e19b2d14-cab8-4489-a76c-\
4d623190a75b"],

Cell[BoxData[
 TagBox[GridBox[{
    {"\<\"filename\"\>", "\<\"name\"\>", "\<\"microscope\"\>", \
"\<\"data\"\>", "\<\"heart\"\>", "\<\"dpf\"\>", "\<\"hpf\"\>", \
"\<\"transgenic line\"\>", "\<\"ch1\"\>", "\<\"ch2\"\>", "\<\"Hz/fps\"\>", \
"\<\"x (um)\"\>", "\<\"y (um)\"\>", "\<\"z (um)\"\>"},
    {"\<\"150204-e004-36\"\>", "\<\"150204_weber tp1 e004\"\>", \
"\<\"SPIM3\"\>", "\<\"movie stacks\"\>", "\<\"silent\"\>", "1.5`", 
     "36.`", "\<\"myl7:GCaMP5G-Arch(D95N), myl7:H2A-mCherry\"\>", \
"\<\"myl7:GCaMP5G\"\>", "\<\"myl7:H2A-mCherry\"\>", "400.`", "0.41`", "0.41`",
      "1.`"},
    {"\<\"150204-e004-44\"\>", "\<\"150204_weber tp2 e004\"\>", \
"\<\"SPIM3\"\>", "\<\"movie stacks\"\>", "\<\"silent\"\>", "2.`", 
     "44.`", "\<\"myl7:GCaMP5G-Arch(D95N), myl7:H2A-mCherry\"\>", \
"\<\"myl7:GCaMP5G\"\>", "\<\"myl7:H2A-mCherry\"\>", "400.`", "0.41`", "0.41`",
      "1.`"},
    {"\<\"150204-e004-52\"\>", "\<\"150204_weber tp3 e004\"\>", \
"\<\"SPIM3\"\>", "\<\"movie stacks\"\>", "\<\"silent\"\>", "2.`", 
     "52.`", "\<\"myl7:GCaMP5G-Arch(D95N), myl7:H2A-mCherry\"\>", \
"\<\"myl7:GCaMP5G\"\>", "\<\"myl7:H2A-mCherry\"\>", "400.`", "0.41`", "0.41`",
      "1.`"},
    {"\<\"140609-e012-53\"\>", "\<\"140609_weber e011+e012\"\>", "\<\"SPIM3\"\
\>", "\<\"movie stack + stack\"\>", "\<\"silent\"\>", "2.`", 
     "53.`", "\<\"myl7:GCaMP5G-Arch(D95N), myl7:H2A-mCherry\"\>", \
"\<\"myl7:GCaMP5G (e001)\"\>", "\<\"myl7:H2A-mCherry (e002)\"\>", "400.`", 
     "0.41`", "0.41`", "1.`"},
    {"\<\"140609-e032-53\"\>", "\<\"140609_weber e031+e032\"\>", "\<\"SPIM3\"\
\>", "\<\"movie stack + stack\"\>", "\<\"silent\"\>", "2.`", 
     "53.`", "\<\"myl7:GCaMP5G-Arch(D95N), myl7:H2A-mCherry\"\>", \
"\<\"myl7:GCaMP5G (e001)\"\>", "\<\"myl7:H2A-mCherry (e002)\"\>", "400.`", 
     "0.41`", "0.41`", "1.`"}
   },
   GridBoxAlignment->{
    "Columns" -> {{Left}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
     "RowsIndexed" -> {}},
   GridBoxSpacings->{"Columns" -> {
       Offset[0.27999999999999997`], {
        Offset[2.0999999999999996`]}, 
       Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
       Offset[0.2], {
        Offset[0.4]}, 
       Offset[0.2]}, "RowsIndexed" -> {}}],
  Function[BoxForm`e$, 
   TableForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{3.715102266408564*^9, 
  3.715102349674192*^9},ExpressionUUID->"d2a25f69-8a5d-43e2-86be-\
8e098f350f70"]
}, Open  ]],

Cell["\<\
Indicate number of dataset for analysis here. For illustration purposes we \
will use dataset 4:\
\>", "Text",
 CellChangeTimes->{{3.7147997690692167`*^9, 
  3.714799804298193*^9}},ExpressionUUID->"bac82004-ec06-4064-870b-\
a235fe341482"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"dataset", " ", "=", " ", "4"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"overview", "[", 
   RowBox[{"[", 
    RowBox[{"dataset", "+", "1"}], "]"}], "]"}], "[", 
  RowBox[{"[", "1", "]"}], "]"}]}], "Input",
 CellChangeTimes->{{3.6616988049646997`*^9, 3.661698805331214*^9}, {
   3.661699570047418*^9, 3.6616995702067003`*^9}, {3.661699685846887*^9, 
   3.661699685942478*^9}, {3.661699877141048*^9, 3.6616998772590837`*^9}, {
   3.661700038393881*^9, 3.661700038652042*^9}, {3.661700334737482*^9, 
   3.661700334855748*^9}, {3.661700605938519*^9, 3.661700606231571*^9}, 
   3.6619510546485367`*^9, {3.6619511802396307`*^9, 3.661951180413286*^9}, {
   3.661951331335569*^9, 3.661951331636476*^9}, {3.661951466820656*^9, 
   3.661951467548032*^9}, {3.662017798157402*^9, 3.662017798392653*^9}, 
   3.662294981013357*^9, {3.662295567511388*^9, 3.662295567637494*^9}, {
   3.662295755753685*^9, 3.662295756270338*^9}, {3.6622962877254333`*^9, 
   3.6622962879874353`*^9}, 3.662299466893277*^9, {3.667719223646413*^9, 
   3.667719223899783*^9}, {3.668839781746401*^9, 3.668839782050395*^9}, {
   3.66883989569734*^9, 3.668839895879416*^9}, {3.668839926511546*^9, 
   3.668839926734028*^9}, {3.668839978261392*^9, 3.668839978517087*^9}, {
   3.668840023660438*^9, 3.668840024156015*^9}, {3.668841525230241*^9, 
   3.6688415253632174`*^9}, 3.669356367489142*^9, {3.66935876991918*^9, 
   3.669358770061015*^9}, 3.669358897906798*^9, {3.669435010597662*^9, 
   3.669435012732415*^9}, 3.6694360073190947`*^9, {3.669437184435788*^9, 
   3.669437184617661*^9}, {3.669437338830986*^9, 3.6694373390053043`*^9}, {
   3.6694602405174417`*^9, 3.669460240594811*^9}, 3.669963041105193*^9, {
   3.669963135421245*^9, 3.669963135524159*^9}, {3.669963174354681*^9, 
   3.669963174506352*^9}, {3.671251083346183*^9, 3.671251083586445*^9}, {
   3.674458853996708*^9, 3.674458856530954*^9}, 3.6744804031035023`*^9, {
   3.674480634219165*^9, 3.6744806344267893`*^9}, {3.6744808012621403`*^9, 
   3.674480801549555*^9}, {3.674527016704975*^9, 3.674527017024848*^9}, {
   3.674828691983982*^9, 3.674828692103085*^9}, 3.6748291933172207`*^9, {
   3.674829722144554*^9, 3.674829772996612*^9}, 3.674829818865635*^9, {
   3.674834417030634*^9, 3.6748344171492147`*^9}, {3.6748350739103813`*^9, 
   3.674835074348338*^9}, {3.6748353954284267`*^9, 3.674835395794833*^9}, {
   3.6748357058655777`*^9, 3.674835706110931*^9}, {3.67483675921109*^9, 
   3.6748367594101677`*^9}, {3.674836906042531*^9, 3.6748369061455927`*^9}, {
   3.674837015978903*^9, 3.6748370162086697`*^9}, {3.6748371149521923`*^9, 
   3.674837115511373*^9}, {3.674837675853219*^9, 3.674837676090798*^9}, {
   3.674837711393977*^9, 3.674837711513997*^9}, {3.6749005088508463`*^9, 
   3.6749005091307697`*^9}, 3.674905087058902*^9, {3.674905199933023*^9, 
   3.6749052002113132`*^9}, {3.674905275755107*^9, 3.674905277000918*^9}, {
   3.6749164728209677`*^9, 3.6749164730845346`*^9}, 
   3.714755249668799*^9},ExpressionUUID->"57beec85-fb88-4b08-a3fd-\
0aa3deac5b9c"],

Cell[BoxData["\<\"140609-e012-53\"\>"], "Output",
 CellChangeTimes->{3.715102266506641*^9, 
  3.7151023507906847`*^9},ExpressionUUID->"0445f292-6242-4b17-99b6-\
0c51c8c73314"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["global parameters for analysis", "Subchapter",
 CellChangeTimes->{{3.6554776678244247`*^9, 3.655477674305852*^9}, {
  3.714755785830852*^9, 3.7147557971447144`*^9}, {3.714798846964857*^9, 
  3.7147988555556602`*^9}},ExpressionUUID->"58850438-a23b-4e20-bf53-\
e33332202e2a"],

Cell[CellGroupData[{

Cell["dataset-specific information", "Section",
 CellChangeTimes->{{3.714798816970935*^9, 
  3.71479882729669*^9}},ExpressionUUID->"895d6b34-5f81-45e3-82b5-\
e0cad07d01d0"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"fname", " ", "=", " ", 
  RowBox[{"overview", "[", 
   RowBox[{"[", 
    RowBox[{
     RowBox[{"dataset", "+", "1"}], ",", "1"}], "]"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"age", " ", "=", " ", 
  RowBox[{"overview", "[", 
   RowBox[{"[", 
    RowBox[{
     RowBox[{"dataset", "+", "1"}], ",", "7"}], "]"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"sampling", " ", "=", " ", 
  RowBox[{"overview", "[", 
   RowBox[{"[", 
    RowBox[{
     RowBox[{"dataset", "+", "1"}], ",", "11"}], "]"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"dx", " ", "=", " ", 
  RowBox[{"overview", "[", 
   RowBox[{"[", 
    RowBox[{
     RowBox[{"dataset", "+", "1"}], ",", "12"}], "]"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"samplingCorrectionFactor", " ", "=", " ", 
   RowBox[{"400", "/", "sampling"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.655479021511404*^9, 3.655479133277341*^9}, 
   3.655479168135984*^9, {3.655487371971097*^9, 3.655487372234848*^9}, 
   3.655489483208609*^9, 3.655490299425108*^9, {3.655490644672233*^9, 
   3.655490644774046*^9}, {3.655533232865612*^9, 3.655533244600911*^9}, {
   3.655533519790916*^9, 3.6555335198944483`*^9}, {3.655533906040166*^9, 
   3.655533906133751*^9}, 3.655534024866321*^9, {3.655534159555071*^9, 
   3.6555341596589003`*^9}, {3.655535031717915*^9, 3.655535032235477*^9}, {
   3.655535862268572*^9, 3.655535862426869*^9}, {3.655535942509951*^9, 
   3.655535942644422*^9}, {3.655536065345306*^9, 3.6555360655276937`*^9}, {
   3.6555361482341633`*^9, 3.6555361483368587`*^9}, {3.655536269765544*^9, 
   3.655536270075507*^9}, {3.6555415495606613`*^9, 3.655541549640798*^9}, {
   3.655546248986149*^9, 3.655546249255982*^9}, {3.655546528727294*^9, 
   3.655546528990411*^9}, 3.655547057565041*^9, {3.655547266361803*^9, 
   3.655547266479578*^9}, {3.655547885678088*^9, 3.655547885805414*^9}, {
   3.6557198439299793`*^9, 3.655719844087031*^9}, 3.6564044086060553`*^9, {
   3.656686420679265*^9, 3.6566864207797823`*^9}, {3.657345184367741*^9, 
   3.6573451845996*^9}, {3.657348396415759*^9, 3.6573483965119677`*^9}, {
   3.657541782503058*^9, 3.6575417826103077`*^9}, {3.657542616905013*^9, 
   3.6575426170398703`*^9}, {3.6575429891181993`*^9, 3.657542989225912*^9}, {
   3.6578692973927727`*^9, 3.657869299550892*^9}, {3.657869901031538*^9, 
   3.657869901149851*^9}, {3.657870185950344*^9, 3.6578701870062017`*^9}, {
   3.657870596827506*^9, 3.6578705969307547`*^9}, 3.65787202419201*^9, {
   3.657880200309387*^9, 3.657880201402659*^9}, {3.657961274646967*^9, 
   3.657961274764965*^9}, 3.6579616775648937`*^9, {3.657963748537416*^9, 
   3.657963748800256*^9}, {3.6579640548584023`*^9, 3.6579640550397377`*^9}, 
   3.6579643966343813`*^9, {3.657964787982163*^9, 3.657964788219819*^9}, {
   3.657979061944572*^9, 3.657979062094222*^9}, 3.657979162259286*^9, {
   3.658147338047896*^9, 3.6581473383659687`*^9}, {3.658147493417946*^9, 
   3.658147493560783*^9}, 3.658147638759336*^9, {3.6581478330411663`*^9, 
   3.6581478331988783`*^9}, {3.65821538082722*^9, 3.6582153931599827`*^9}, 
   3.6582192307680483`*^9, {3.658220365191001*^9, 3.658220365332737*^9}, {
   3.6582210079488087`*^9, 3.658221008348791*^9}, {3.658221655028468*^9, 
   3.658221655189927*^9}, {3.6582232741247177`*^9, 3.658223274442339*^9}, {
   3.65822964285907*^9, 3.658229643000409*^9}, {3.658230129188501*^9, 
   3.6582301293063307`*^9}, 3.658230303590469*^9, {3.658232817686871*^9, 
   3.658232817892416*^9}, 3.6584768211696243`*^9, {3.658478158331215*^9, 
   3.658478158443344*^9}, {3.658478301113508*^9, 3.658478301271511*^9}, {
   3.658478619567287*^9, 3.658478634334279*^9}, 3.658478678334684*^9, 
   3.658480635788706*^9, {3.6584833229658003`*^9, 3.658483323290544*^9}, 
   3.658487522364092*^9, {3.65848758445532*^9, 3.658487584598105*^9}, {
   3.6584884171436453`*^9, 3.65848841727075*^9}, {3.6584884778234158`*^9, 
   3.6584884779652967`*^9}, {3.658489370996216*^9, 3.65848937113943*^9}, {
   3.658489595695405*^9, 3.658489597764439*^9}, {3.658489696338751*^9, 
   3.658489696617964*^9}, {3.658492009634116*^9, 3.6584920096793003`*^9}, {
   3.6585846660710297`*^9, 3.658584666459688*^9}, {3.658585292452421*^9, 
   3.6585852925298557`*^9}, {3.658641070359269*^9, 3.658641076886517*^9}, {
   3.65864165133532*^9, 3.658641653470298*^9}, {3.658642007326476*^9, 
   3.658642007459906*^9}, {3.6586449508479767`*^9, 3.658644951699139*^9}, {
   3.658645465735037*^9, 3.658645465860588*^9}, {3.658645807779954*^9, 
   3.658645808242608*^9}, {3.6586461054593973`*^9, 3.658646105602231*^9}, {
   3.658646252248713*^9, 3.658646252398234*^9}, {3.6586464277626553`*^9, 
   3.658646438984563*^9}, {3.658646475842163*^9, 3.6586464760399303`*^9}, {
   3.658647174512472*^9, 3.6586471746871433`*^9}, {3.658648216620336*^9, 
   3.658648217242033*^9}, {3.6586482863783407`*^9, 3.658648286447935*^9}, 
   3.658648320671286*^9, {3.658648376543421*^9, 3.658648377325749*^9}, {
   3.65864855434483*^9, 3.658648554512006*^9}, 3.658653751876148*^9, {
   3.658653899701229*^9, 3.6586538998589697`*^9}, {3.6586540747667093`*^9, 
   3.65865407487011*^9}, {3.658658204802387*^9, 3.658658205272847*^9}, {
   3.658659165924616*^9, 3.658659166540614*^9}, {3.658660253437405*^9, 
   3.658660253675522*^9}, {3.658660368441811*^9, 3.6586603685352793`*^9}, {
   3.658660440119746*^9, 3.658660444189699*^9}, {3.6586605337874117`*^9, 
   3.6586605339068832`*^9}, {3.6586609079532824`*^9, 3.658660984781398*^9}, {
   3.658661222709853*^9, 3.658661223071912*^9}, {3.659076139006364*^9, 
   3.6590761408454857`*^9}, {3.660997322314293*^9, 3.660997333792224*^9}, {
   3.661000426499291*^9, 3.661000426583947*^9}, {3.661083041977661*^9, 
   3.6610830426181097`*^9}, {3.661148823202075*^9, 3.661148823328382*^9}, 
   3.6611561390514297`*^9, {3.661156350058941*^9, 3.6611563501925793`*^9}, {
   3.661156635184662*^9, 3.661156635334544*^9}, {3.66115690177173*^9, 
   3.661156902306993*^9}, {3.661157229700251*^9, 3.661157229762034*^9}, {
   3.661686252124406*^9, 3.6616862523611393`*^9}, {3.6616895007618303`*^9, 
   3.661689507670538*^9}, 3.6616899414082108`*^9, {3.661691585493167*^9, 
   3.661691585986661*^9}, {3.6616980800173807`*^9, 3.661698081343108*^9}, {
   3.661698611497982*^9, 3.6616986209107933`*^9}, {3.661698653631297*^9, 
   3.661698653956615*^9}, {3.661698783858286*^9, 3.661698786101461*^9}, {
   3.6743717081272707`*^9, 3.674371708182232*^9}, {3.674460314580468*^9, 
   3.674460320395936*^9}, {3.6761887911742573`*^9, 3.6761888043279533`*^9}, {
   3.7147553309681807`*^9, 3.7147554873603983`*^9}, {3.714755592486487*^9, 
   3.71475563782023*^9}, {3.714755667982114*^9, 3.714755777847192*^9}, 
   3.7147558356960573`*^9, {3.714755930660054*^9, 3.7147559665389977`*^9}, 
   3.714799816502062*^9},ExpressionUUID->"fd1fd691-c10e-4522-804e-\
3cbfc007e426"],

Cell[BoxData["\<\"140609-e012-53\"\>"], "Output",
 CellChangeTimes->{
  3.7151024261855097`*^9},ExpressionUUID->"f2f404a7-ac75-4ca0-88d4-\
3d236b3f2188"],

Cell[BoxData["53.`"], "Output",
 CellChangeTimes->{
  3.7151024261976633`*^9},ExpressionUUID->"9ca876f0-b8d0-4992-ae8c-\
b5934f2aa65c"],

Cell[BoxData["400.`"], "Output",
 CellChangeTimes->{
  3.715102426209516*^9},ExpressionUUID->"d5c63f05-b898-479f-9989-\
ec3c9ebfbe6b"],

Cell[BoxData["0.41`"], "Output",
 CellChangeTimes->{
  3.715102426220673*^9},ExpressionUUID->"d4cbe26b-eafe-4be8-a7b8-\
494c66e45820"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["settings for import and export", "Section",
 CellChangeTimes->{{3.714798830927537*^9, 
  3.714798844282794*^9}},ExpressionUUID->"2a63eff9-bf61-41e4-8473-\
49c46fc625d1"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"directory", " ", "prefix", " ", "for", " ", "import"}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"prefix", " ", "=", " ", 
     RowBox[{"root", "<>", "\"\</results/\>\""}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "Ca", " ", "signals", " ", "per", " ", "cell", " ", "from", " ", "HDF5", 
     " ", "file"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"in", " ", "=", 
     RowBox[{
     "prefix", "<>", "\"\<myl7-GCaMP5G-from-processed-labels/\>\"", "<>", 
      "fname", "<>", "\"\<-curated-signal.h5\>\""}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "labelled", " ", "volume", " ", "of", " ", "detected", " ", "cells"}], 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"map", " ", "=", " ", 
     RowBox[{
     "prefix", "<>", "\"\<myl7-H2A-processed-labels/\>\"", "<>", "fname", 
      "<>", "\"\<-curated-labels.tif\>\""}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "coordinates", " ", "of", " ", "manually", " ", "extracted", " ", 
     "midline"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"mline", " ", "=", " ", 
     RowBox[{
     "prefix", "<>", "\"\<extracted-midline/\>\"", "<>", "fname", "<>", 
      "\"\<-midline.m\>\""}]}], ";"}]}]}]], "Input",
 CellChangeTimes->{{3.7147558009952583`*^9, 3.714755918798725*^9}, {
   3.714756001531382*^9, 3.7147560132343807`*^9}, 3.714798885787745*^9, {
   3.715094196677239*^9, 3.7150942422278*^9}, {3.715094349599399*^9, 
   3.715094420859765*^9}, {3.715094634608032*^9, 
   3.715094639553718*^9}},ExpressionUUID->"845b9091-3ac4-4ca6-8a11-\
912d118cb551"]
}, Open  ]],

Cell[CellGroupData[{

Cell["import positions for each cell", "Section",
 CellChangeTimes->{{3.714798914835228*^9, 3.71479891797869*^9}, {
  3.714799901334991*^9, 3.714799925419663*^9}, {3.715102473937787*^9, 
  3.7151024749691057`*^9}},ExpressionUUID->"6261eab6-d79b-4e34-9781-\
a7915c48b022"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"names", "=", 
   RowBox[{"Import", "[", 
    RowBox[{"in", ",", 
     RowBox[{"{", 
      RowBox[{"\"\<HDF5\>\"", ",", "\"\<Datasets\>\""}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ns", " ", "=", " ", 
   RowBox[{"Length", "[", "names", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"heart", "=", 
   RowBox[{"Import", "[", "map", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"img", "=", 
   RowBox[{"Image3D", "[", 
    RowBox[{"heart", ",", "\"\<Bit16\>\""}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"lab", " ", "=", " ", 
   RowBox[{"ComponentMeasurements", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"ImageData", "[", 
        RowBox[{"img", ",", "\"\<Bit16\>\""}], "]"}], ",", "img"}], "}"}], 
     ",", 
     RowBox[{"{", "\"\<Label\>\"", "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"cnts", " ", "=", " ", 
   RowBox[{"ComponentMeasurements", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"ImageData", "[", 
        RowBox[{"img", ",", "\"\<Bit16\>\""}], "]"}], ",", "img"}], "}"}], 
     ",", 
     RowBox[{"{", "\"\<Centroid\>\"", "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pts", "=", 
   RowBox[{"Join", "@@", 
    RowBox[{"(", 
     RowBox[{"Last", "/@", "cnts"}], ")"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pts2", " ", "=", " ", 
   RowBox[{
    RowBox[{
     RowBox[{"#", "*", 
      RowBox[{"{", 
       RowBox[{"dx", ",", "dx", ",", "1"}], "}"}]}], "&"}], "/@", "pts"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"stdTransform", "=", 
   RowBox[{"Import", "[", 
    RowBox[{
    "prefix", "<>", "\"\<standard-view-transforms/\>\"", "<>", "fname", "<>", 
     "\"\<-standardTransform.m\>\""}], "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.6554777135070953`*^9, 3.6554777232097397`*^9}, {
   3.655479245674204*^9, 3.6554792615614*^9}, 3.655487398780986*^9, {
   3.658478329966675*^9, 3.658478401381905*^9}, {3.6586609640409737`*^9, 
   3.658660968031726*^9}, {3.658661231493938*^9, 3.6586612318714027`*^9}, {
   3.661000523684219*^9, 3.661000523889441*^9}, 3.661000583676567*^9, 
   3.661000733243688*^9, {3.66115553423967*^9, 3.661155553104319*^9}, {
   3.6688373204136677`*^9, 3.6688373263768167`*^9}, {3.674458971630077*^9, 
   3.674458973429183*^9}, {3.674834667924857*^9, 3.674834672869282*^9}, {
   3.7147560215867863`*^9, 3.714756043690292*^9}, {3.714756075481628*^9, 
   3.714756104070279*^9}, {3.715094440206498*^9, 3.715094501536394*^9}, 
   3.715094658275865*^9, {3.715102493941497*^9, 
   3.715102515048674*^9}},ExpressionUUID->"9455d836-76ca-4f66-a690-\
300897c3bcdc"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["trace midline", "Subchapter",
 CellChangeTimes->{{3.6572946864487123`*^9, 
  3.657294688830961*^9}},ExpressionUUID->"b6f9fc7b-9a38-484d-87ca-\
13064a3af765"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"xmin", ",", "xmax"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"ymin", ",", "ymax"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"zmin", ",", "zmax"}], "}"}]}], "}"}], "=", 
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"Min", "[", "#", "]"}], ",", 
      RowBox[{"Max", "[", "#", "]"}]}], "}"}], "&"}], "/@", 
   RowBox[{"Transpose", "[", "pts2", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.657264228489072*^9, 
  3.657264262224662*^9}},ExpressionUUID->"d17cac46-e4de-4da7-a61f-\
1cb4a32a801f"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"25.625`", ",", "203.975`"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"13.735`", ",", "177.32839544513456`"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"4.509727626459153`", ",", "146.5`"}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.657264242714808*^9, 3.657264263308701*^9}, 
   3.657295011040641*^9, 3.657295249698369*^9, 3.657341858394142*^9, 
   3.657868309631989*^9, 3.657868618949991*^9, 3.657868758549531*^9, 
   3.657868909877549*^9, 3.657869051755949*^9, 3.6578691848509703`*^9, 
   3.6578716131031713`*^9, 3.657871824486197*^9, 3.6581297842931623`*^9, 
   3.6581303488015223`*^9, 3.658130693312724*^9, 3.65813092155726*^9, 
   3.658217564781164*^9, 3.658220303625164*^9, 3.658220911664288*^9, 
   3.658221455794445*^9, 3.658484171082032*^9, 3.6584855711292143`*^9, 
   3.658485635036434*^9, 3.658485745102934*^9, 3.6584858023424273`*^9, 
   3.661086459091107*^9, 3.6610866411384783`*^9, 3.6610867149440536`*^9, 
   3.6610868188706512`*^9, 3.661086889043491*^9, 
   3.715102544989368*^9},ExpressionUUID->"8beab361-9f89-40b8-b533-\
198c8627640f"]
}, Open  ]],

Cell["\<\
Use this intialization if midline is drawn for the first time.\
\>", "Text",
 CellChangeTimes->{{3.715102561085597*^9, 
  3.715102581863144*^9}},ExpressionUUID->"15846ffc-88f8-4158-85ff-\
ad39d0a809ce"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"ctrl1", "=", 
   RowBox[{"{", 
    RowBox[{"35", ",", "0"}], "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ctrl2", "=", 
   RowBox[{"{", 
    RowBox[{"30", ",", "0"}], "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ctrl3", "=", 
   RowBox[{"{", 
    RowBox[{"25", ",", "0"}], "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ctrl4", "=", 
   RowBox[{"{", 
    RowBox[{"20", ",", "0"}], "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ctrl5", "=", 
   RowBox[{"{", 
    RowBox[{"15", ",", "0"}], "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ctrl6", "=", 
   RowBox[{"{", 
    RowBox[{"10", ",", "0"}], "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ctrl7", "=", 
   RowBox[{"{", 
    RowBox[{"5", ",", "0"}], "}"}]}], ";", 
  RowBox[{"ctrl8", "=", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0"}], "}"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.657868392358364*^9, 
  3.657868479294072*^9}},ExpressionUUID->"1bf0dd88-c76d-41a8-b6a5-\
4d341d19085c"],

Cell["Use this intialization to refine an existing midline...", "Text",
 CellChangeTimes->{{3.715102586161633*^9, 
  3.7151026079564*^9}},ExpressionUUID->"ca156e6c-3b38-4a37-a632-840b0eb21501"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"{", 
   RowBox[{
   "ctrl1", ",", "ctrl2", ",", "ctrl3", ",", "ctrl4", ",", "ctrl5", ",", 
    "ctrl6", ",", "ctrl7", ",", "ctrl8"}], "}"}], "=", 
  RowBox[{"Most", "/@", 
   RowBox[{"Import", "[", "mline", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.658217582714118*^9, 
  3.6582176174321423`*^9}},ExpressionUUID->"68c3fbb0-ee5d-4a7a-b120-\
da7ea68bd4f0"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"158.4`", ",", "21.8`"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"163.20000000000002`", ",", "48.2`"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"160.00000000000003`", ",", "74.2`"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"142.`", ",", "89.2`"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"117.60000000000001`", ",", "112.`"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"93.8`", ",", "129.60000000000002`"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"67.8`", ",", "145.6`"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"47.6`", ",", "158.`"}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{3.65821761874671*^9, 3.658218910555758*^9, 
  3.6582203059438133`*^9, 3.6582209117159452`*^9, 3.65822147455766*^9, 
  3.658484173574621*^9, 3.658485571209588*^9, 3.658485635110876*^9, 
  3.6584857483384542`*^9, 3.658485807447587*^9, 3.661086462117632*^9, 
  3.661086642373845*^9, 3.661086715048807*^9, 3.661086818997017*^9, 
  3.6610868891693487`*^9, 
  3.715102549018546*^9},ExpressionUUID->"3d1794ec-b376-42eb-9b89-\
8f93e9534a04"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"{", 
   RowBox[{
   "z1", ",", "z2", ",", "z3", ",", "z4", ",", "z5", ",", "z6", ",", "z7", 
    ",", "z8"}], "}"}], "=", 
  RowBox[{"Last", "/@", 
   RowBox[{"Import", "[", "mline", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.658217622090426*^9, 
  3.6582176430365963`*^9}},ExpressionUUID->"9e1b445f-fb06-476c-94bb-\
15f46d6ac19e"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "139.6`", ",", "83.2`", ",", "58.2`", ",", "61.400000000000006`", ",", 
   "76.8`", ",", "88.80000000000001`", ",", "76.8`", ",", 
   "43.800000000000004`"}], "}"}]], "Output",
 CellChangeTimes->{3.658217643543076*^9, 3.6582189106373787`*^9, 
  3.65822030697668*^9, 3.658220911796225*^9, 3.658484175010581*^9, 
  3.658485571292553*^9, 3.658485635160122*^9, 3.658485749265368*^9, 
  3.658485808269579*^9, 3.661086463243074*^9, 3.6610866441290092`*^9, 
  3.661086715128934*^9, 3.6610868190620213`*^9, 3.661086889248589*^9, 
  3.715102615681842*^9},ExpressionUUID->"342ee311-6765-484f-9a06-\
ffe35c2f2ad8"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"cold", " ", "start"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"Manipulate", "[", 
    RowBox[{
     RowBox[{"Graphics", "[", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{
         RowBox[{"Point", "[", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"#", "[", 
             RowBox[{"[", "1", "]"}], "]"}], ",", 
            RowBox[{"#", "[", 
             RowBox[{"[", "2", "]"}], "]"}]}], "}"}], "]"}], "&"}], "/@", 
        "pts2"}], "}"}], "]"}], ",", 
     RowBox[{"{", 
      RowBox[{"ctrl1", ",", "Locator"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"ctrl2", ",", "Locator"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"ctrl3", ",", "Locator"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"ctrl4", ",", "Locator"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"ctrl5", ",", "Locator"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"ctrl6", ",", "Locator"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"ctrl7", ",", " ", "Locator"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"ctrl8", ",", "Locator"}], "}"}], ",", 
     RowBox[{"LocalizeVariables", "\[Rule]", "False"}]}], "]"}], 
   "*)"}]}]], "Input",
 CellChangeTimes->{{3.6572959113362627`*^9, 3.6572959199953814`*^9}, 
   3.658218917689844*^9},ExpressionUUID->"8257b7e7-d5ab-4e23-975b-\
f895883d03f3"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Manipulate", "[", 
  RowBox[{
   RowBox[{"Graphics", "[", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"Point", "[", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"#", "[", 
            RowBox[{"[", "1", "]"}], "]"}], ",", 
           RowBox[{"#", "[", 
            RowBox[{"[", "2", "]"}], "]"}]}], "}"}], "]"}], "&"}], "/@", 
       "pts2"}], ",", 
      RowBox[{"Line", "@", 
       RowBox[{"{", 
        RowBox[{
        "ctrl1", ",", "ctrl2", ",", "ctrl3", ",", "ctrl4", ",", "ctrl5", ",", 
         "ctrl6", ",", "ctrl7", ",", "ctrl8"}], "}"}]}]}], "}"}], "]"}], ",", 
   
   RowBox[{"{", 
    RowBox[{"ctrl1", ",", "Locator"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"ctrl2", ",", "Locator"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"ctrl3", ",", "Locator"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"ctrl4", ",", "Locator"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"ctrl5", ",", "Locator"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"ctrl6", ",", "Locator"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"ctrl7", ",", " ", "Locator"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"ctrl8", ",", "Locator"}], "}"}], ",", 
   RowBox[{"LocalizeVariables", "\[Rule]", "False"}]}], "]"}]], "Input",
 CellChangeTimes->{{3.657265013877626*^9, 3.657265024244822*^9}, {
  3.6572651615928698`*^9, 3.657265187319806*^9}, {3.657265487953784*^9, 
  3.657265548238682*^9}, {3.6572655806461983`*^9, 3.657265618016387*^9}, {
  3.657265828112252*^9, 3.657265829126626*^9}, {3.65726680267234*^9, 
  3.657266994446966*^9}, {3.657267078078143*^9, 3.657267086412489*^9}, {
  3.657267175149373*^9, 3.657267175476777*^9}, {3.657267212076252*^9, 
  3.65726736786335*^9}, {3.657267466779841*^9, 3.65726746834623*^9}, {
  3.6572677225438128`*^9, 3.657267935353231*^9}, {3.657295514137265*^9, 
  3.6572955324537573`*^9}, {3.65729566278811*^9, 3.657295672466086*^9}, {
  3.6572957778209667`*^9, 
  3.6572958969124613`*^9}},ExpressionUUID->"517ad904-0df8-4055-beaa-\
73ffdf841ace"],

Cell[BoxData[
 TagBox[
  StyleBox[
   DynamicModuleBox[{Typeset`show$$ = True, Typeset`bookmarkList$$ = {}, 
    Typeset`bookmarkMode$$ = "Menu", Typeset`animator$$, Typeset`animvar$$ = 
    1, Typeset`name$$ = "\"untitled\"", Typeset`specs$$ = {{
      Hold[$CellContext`ctrl1], Automatic}, {
      Hold[$CellContext`ctrl2], Automatic}, {
      Hold[$CellContext`ctrl3], Automatic}, {
      Hold[$CellContext`ctrl4], Automatic}, {
      Hold[$CellContext`ctrl5], Automatic}, {
      Hold[$CellContext`ctrl6], Automatic}, {
      Hold[$CellContext`ctrl7], Automatic}, {
      Hold[$CellContext`ctrl8], Automatic}}, Typeset`size$$ = {
    360., {164., 168.}}, Typeset`update$$ = 0, Typeset`initDone$$, 
    Typeset`skipInitDone$$ = True}, 
    DynamicBox[Manipulate`ManipulateBoxes[
     1, StandardForm, 
      "Variables" :> {$CellContext`ctrl1 = Automatic, $CellContext`ctrl2 = 
        Automatic, $CellContext`ctrl3 = Automatic, $CellContext`ctrl4 = 
        Automatic, $CellContext`ctrl5 = Automatic, $CellContext`ctrl6 = 
        Automatic, $CellContext`ctrl7 = Automatic, $CellContext`ctrl8 = 
        Automatic}, "ControllerVariables" :> {}, 
      "OtherVariables" :> {
       Typeset`show$$, Typeset`bookmarkList$$, Typeset`bookmarkMode$$, 
        Typeset`animator$$, Typeset`animvar$$, Typeset`name$$, 
        Typeset`specs$$, Typeset`size$$, Typeset`update$$, Typeset`initDone$$,
         Typeset`skipInitDone$$}, "Body" :> Graphics[{
         Map[Point[{
            Part[#, 1], 
            Part[#, 2]}]& , $CellContext`pts2], 
         Line[{$CellContext`ctrl1, $CellContext`ctrl2, $CellContext`ctrl3, \
$CellContext`ctrl4, $CellContext`ctrl5, $CellContext`ctrl6, \
$CellContext`ctrl7, $CellContext`ctrl8}]}], 
      "Specifications" :> {{$CellContext`ctrl1, Automatic, ControlType -> 
         Locator}, {$CellContext`ctrl2, Automatic, ControlType -> 
         Locator}, {$CellContext`ctrl3, Automatic, ControlType -> 
         Locator}, {$CellContext`ctrl4, Automatic, ControlType -> 
         Locator}, {$CellContext`ctrl5, Automatic, ControlType -> 
         Locator}, {$CellContext`ctrl6, Automatic, ControlType -> 
         Locator}, {$CellContext`ctrl7, Automatic, ControlType -> 
         Locator}, {$CellContext`ctrl8, Automatic, ControlType -> Locator}}, 
      "Options" :> {LocalizeVariables -> False}, "DefaultOptions" :> {}],
     ImageSizeCache->{411., {196., 202.}},
     SingleEvaluation->True],
    Deinitialization:>None,
    DynamicModuleValues:>{},
    SynchronousInitialization->True,
    UndoTrackedVariables:>{Typeset`show$$, Typeset`bookmarkMode$$},
    UnsavedVariables:>{Typeset`initDone$$},
    UntrackedVariables:>{Typeset`size$$}], "Manipulate",
   Deployed->True,
   StripOnInput->False],
  Manipulate`InterpretManipulate[1]]], "Output",
 CellChangeTimes->{
  3.6578684527690897`*^9, 3.6578690608053207`*^9, 3.657869188066573*^9, {
   3.661086477782655*^9, 3.6610864811862593`*^9}, 3.6610866491865673`*^9, 
   3.661086733978374*^9, 3.6610868192343616`*^9, 3.661086896692539*^9, 
   3.715102632641016*^9},ExpressionUUID->"ad3ce0ba-0494-4926-b19c-\
7d496beb1ce9"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Manipulate", "[", 
  RowBox[{
   RowBox[{"Graphics", "[", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"Point", "[", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"#", "[", 
            RowBox[{"[", "1", "]"}], "]"}], ",", 
           RowBox[{"#", "[", 
            RowBox[{"[", "3", "]"}], "]"}]}], "}"}], "]"}], "&"}], "/@", 
       "pts2"}], ",", 
      RowBox[{"Line", "@", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"Dynamic", "[", "ctrl1", "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}], "[", 
            RowBox[{"[", "1", "]"}], "]"}], ",", "z1"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"Dynamic", "[", "ctrl2", "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}], "[", 
            RowBox[{"[", "1", "]"}], "]"}], ",", "z2"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"Dynamic", "[", "ctrl3", "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}], "[", 
            RowBox[{"[", "1", "]"}], "]"}], ",", "z3"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"Dynamic", "[", "ctrl4", "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}], "[", 
            RowBox[{"[", "1", "]"}], "]"}], ",", "z4"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"Dynamic", "[", "ctrl5", "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}], "[", 
            RowBox[{"[", "1", "]"}], "]"}], ",", "z5"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"Dynamic", "[", "ctrl6", "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}], "[", 
            RowBox[{"[", "1", "]"}], "]"}], ",", "z6"}], "}"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"Dynamic", "[", "ctrl7", "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}], "[", 
            RowBox[{"[", "1", "]"}], "]"}], ",", "z7"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"Dynamic", "[", "ctrl8", "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}], "[", 
            RowBox[{"[", "1", "]"}], "]"}], ",", "z8"}], "}"}]}], "}"}]}]}], 
     "}"}], "]"}], ",", 
   RowBox[{"{", 
    RowBox[{"z1", ",", "zmin", ",", "zmax", ",", "Slider"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"z2", ",", "zmin", ",", "zmax", ",", "Slider"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"z3", ",", "zmin", ",", "zmax", ",", "Slider"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"z4", ",", "zmin", ",", "zmax", ",", "Slider"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"z5", ",", "zmin", ",", "zmax", ",", "Slider"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"z6", ",", "zmin", ",", "zmax", ",", "Slider"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"z7", ",", "zmin", ",", "zmax", ",", "Slider"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"z8", ",", "zmin", ",", "zmax", ",", "Slider"}], "}"}], ",", 
   RowBox[{"LocalizeVariables", "\[Rule]", "False"}]}], "]"}]], "Input",
 CellChangeTimes->{{3.657268013439745*^9, 3.6572681462913847`*^9}, {
  3.657268176704747*^9, 3.657268236581583*^9}, {3.657268292325926*^9, 
  3.657268317877737*^9}, {3.6572683578618803`*^9, 3.6572683858047256`*^9}, {
  3.657295540542664*^9, 
  3.657295572116735*^9}},ExpressionUUID->"72a5b4e7-99e9-4ac4-b857-\
5d97a761ae8a"],

Cell[BoxData[
 TagBox[
  StyleBox[
   DynamicModuleBox[{Typeset`show$$ = True, Typeset`bookmarkList$$ = {}, 
    Typeset`bookmarkMode$$ = "Menu", Typeset`animator$$, Typeset`animvar$$ = 
    1, Typeset`name$$ = "\"untitled\"", Typeset`specs$$ = {{
      Hold[$CellContext`z1], 4.509727626459153, 146.5}, {
      Hold[$CellContext`z2], 4.509727626459153, 146.5}, {
      Hold[$CellContext`z3], 4.509727626459153, 146.5}, {
      Hold[$CellContext`z4], 4.509727626459153, 146.5}, {
      Hold[$CellContext`z5], 4.509727626459153, 146.5}, {
      Hold[$CellContext`z6], 4.509727626459153, 146.5}, {
      Hold[$CellContext`z7], 4.509727626459153, 146.5}, {
      Hold[$CellContext`z8], 4.509727626459153, 146.5}}, Typeset`size$$ = {
    360., {142., 147.}}, Typeset`update$$ = 0, Typeset`initDone$$, 
    Typeset`skipInitDone$$ = True, $CellContext`z1$5559$$ = 
    0, $CellContext`z2$5564$$ = 0, $CellContext`z3$5565$$ = 
    0, $CellContext`z4$5566$$ = 0, $CellContext`z5$5567$$ = 
    0, $CellContext`z6$5568$$ = 0, $CellContext`z7$5569$$ = 
    0, $CellContext`z8$5570$$ = 0}, 
    DynamicBox[Manipulate`ManipulateBoxes[
     1, StandardForm, 
      "Variables" :> {$CellContext`z1 = 4.509727626459153, $CellContext`z2 = 
        4.509727626459153, $CellContext`z3 = 
        4.509727626459153, $CellContext`z4 = 
        4.509727626459153, $CellContext`z5 = 
        4.509727626459153, $CellContext`z6 = 
        4.509727626459153, $CellContext`z7 = 
        4.509727626459153, $CellContext`z8 = 4.509727626459153}, 
      "ControllerVariables" :> {
        Hold[$CellContext`z1, $CellContext`z1$5559$$, 0], 
        Hold[$CellContext`z2, $CellContext`z2$5564$$, 0], 
        Hold[$CellContext`z3, $CellContext`z3$5565$$, 0], 
        Hold[$CellContext`z4, $CellContext`z4$5566$$, 0], 
        Hold[$CellContext`z5, $CellContext`z5$5567$$, 0], 
        Hold[$CellContext`z6, $CellContext`z6$5568$$, 0], 
        Hold[$CellContext`z7, $CellContext`z7$5569$$, 0], 
        Hold[$CellContext`z8, $CellContext`z8$5570$$, 0]}, 
      "OtherVariables" :> {
       Typeset`show$$, Typeset`bookmarkList$$, Typeset`bookmarkMode$$, 
        Typeset`animator$$, Typeset`animvar$$, Typeset`name$$, 
        Typeset`specs$$, Typeset`size$$, Typeset`update$$, Typeset`initDone$$,
         Typeset`skipInitDone$$}, "Body" :> Graphics[{
         Map[Point[{
            Part[#, 1], 
            Part[#, 3]}]& , $CellContext`pts2], 
         Line[{{
            Part[
             Part[
              Dynamic[$CellContext`ctrl1], 1], 1], $CellContext`z1}, {
            Part[
             Part[
              Dynamic[$CellContext`ctrl2], 1], 1], $CellContext`z2}, {
            Part[
             Part[
              Dynamic[$CellContext`ctrl3], 1], 1], $CellContext`z3}, {
            Part[
             Part[
              Dynamic[$CellContext`ctrl4], 1], 1], $CellContext`z4}, {
            Part[
             Part[
              Dynamic[$CellContext`ctrl5], 1], 1], $CellContext`z5}, {
            Part[
             Part[
              Dynamic[$CellContext`ctrl6], 1], 1], $CellContext`z6}, {
            Part[
             Part[
              Dynamic[$CellContext`ctrl7], 1], 1], $CellContext`z7}, {
            Part[
             Part[
              Dynamic[$CellContext`ctrl8], 1], 1], $CellContext`z8}}]}], 
      "Specifications" :> {{$CellContext`z1, 4.509727626459153, 146.5, 
         ControlType -> Slider}, {$CellContext`z2, 4.509727626459153, 146.5, 
         ControlType -> Slider}, {$CellContext`z3, 4.509727626459153, 146.5, 
         ControlType -> Slider}, {$CellContext`z4, 4.509727626459153, 146.5, 
         ControlType -> Slider}, {$CellContext`z5, 4.509727626459153, 146.5, 
         ControlType -> Slider}, {$CellContext`z6, 4.509727626459153, 146.5, 
         ControlType -> Slider}, {$CellContext`z7, 4.509727626459153, 146.5, 
         ControlType -> Slider}, {$CellContext`z8, 4.509727626459153, 146.5, 
         ControlType -> Slider}}, "Options" :> {LocalizeVariables -> False}, 
      "DefaultOptions" :> {}],
     ImageSizeCache->{624., {172., 177.}},
     SingleEvaluation->True],
    Deinitialization:>None,
    DynamicModuleValues:>{},
    SynchronousInitialization->True,
    UndoTrackedVariables:>{Typeset`show$$, Typeset`bookmarkMode$$},
    UnsavedVariables:>{Typeset`initDone$$},
    UntrackedVariables:>{Typeset`size$$}], "Manipulate",
   Deployed->True,
   StripOnInput->False],
  Manipulate`InterpretManipulate[1]]], "Output",
 CellChangeTimes->{3.657295963084852*^9, 3.657868913477849*^9, 
  3.657869099671933*^9, 3.657869228348834*^9, 3.658130764806205*^9, 
  3.6610865357057323`*^9, 3.661086668758306*^9, 3.661086833098897*^9, 
  3.6610869037338*^9, 
  3.715102660496808*^9},ExpressionUUID->"ed2f9507-5ce8-459b-a852-\
c7fc74473705"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ctrlPts", " ", "=", " ", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"Append", "[", 
     RowBox[{"ctrl1", ",", "z1"}], "]"}], ",", "\[IndentingNewLine]", 
    RowBox[{"Append", "[", 
     RowBox[{"ctrl2", ",", "z2"}], "]"}], ",", "\[IndentingNewLine]", 
    RowBox[{"Append", "[", 
     RowBox[{"ctrl3", ",", "z3"}], "]"}], ",", "\[IndentingNewLine]", 
    RowBox[{"Append", "[", 
     RowBox[{"ctrl4", ",", "z4"}], "]"}], ",", "\[IndentingNewLine]", 
    RowBox[{"Append", "[", 
     RowBox[{"ctrl5", ",", "z5"}], "]"}], ",", "\[IndentingNewLine]", 
    RowBox[{"Append", "[", 
     RowBox[{"ctrl6", ",", "z6"}], "]"}], ",", "\[IndentingNewLine]", 
    RowBox[{"Append", "[", 
     RowBox[{"ctrl7", ",", "z7"}], "]"}], ",", "\[IndentingNewLine]", 
    RowBox[{"Append", "[", 
     RowBox[{"ctrl8", ",", "z8"}], "]"}]}], "}"}]}]], "Input",
 CellChangeTimes->{{3.657268472988624*^9, 3.657268524221877*^9}, {
  3.6572955765407124`*^9, 3.6572955839399157`*^9}, {3.657296152580127*^9, 
  3.657296162500433*^9}},ExpressionUUID->"9b7405a4-8c32-4d07-b1bb-\
2206b7832375"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"167.20000000000002`", ",", "13.`", ",", "18.`"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"156.20000000000002`", ",", "47.5`", ",", "83.2`"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"140.4`", ",", "53.`", ",", "58.2`"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"137.8`", ",", "69.`", ",", "61.400000000000006`"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"121.4`", ",", "103.`", ",", "76.8`"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"101.8`", ",", "126.`", ",", "88.80000000000001`"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"71.8`", ",", "138.`", ",", "76.8`"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"47.6`", ",", "152.5`", ",", "43.800000000000004`"}], "}"}]}], 
  "}"}]], "Output",
 CellChangeTimes->CompressedData["
1:eJxTTMoPSmVkYGBQA+IlZnOXrrd/7ZhjNHP+HiBdHbl+F4hWOi5wB0QfqZsi
sBdIR1xMUAHRAb+uMV8B0nJSL5decXjt6PLQajuIroq/cgtEe70/+gZEn/u4
/g+IfrQjW/sakE7LsnEB0fIZn71CHF873jqzLAVET3sX2QKiQ2S6J4PoKOG3
a0F04+t5W0C0qLboMRD9Lyz9KohWbkmSrgfSEpHrjoNorfoZ6Q1Ammmy3SYQ
/aHDmrERSP9I7HRgdAK6+1PSGxB94ZzpdxA9RcyLiQlIz3qwRAhEq332+vzd
Deif/xf+gGi706c4fwBpL7d6IRDdkmggD6IbpIR+/lv72hEAKEya3Q==
  
  "],ExpressionUUID->"4ccdb5db-933b-4d93-ae55-df159c452af1"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["export midline", "Subchapter",
 CellChangeTimes->{{3.715102669716579*^9, 
  3.715102681713509*^9}},ExpressionUUID->"810ae84c-84a1-41cd-af5c-\
70ffc425b04e"],

Cell[BoxData[
 RowBox[{"Export", "[", 
  RowBox[{"mline", ",", "ctrlPts"}], "]"}]], "Input",
 CellChangeTimes->{{3.657294824642795*^9, 
  3.657294839442383*^9}},ExpressionUUID->"55b6ad92-0948-4c5a-abf6-\
0f9a52f9d0e5"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
},
WindowSize->{808, 911},
WindowMargins->{{381, Automatic}, {35, Automatic}},
FrontEndVersion->"11.1 for Mac OS X x86 (32-bit, 64-bit Kernel) (April 27, \
2017)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 312, 6, 148, "Title", "ExpressionUUID" -> \
"85ce8b24-5b1d-401d-b49e-f64a086b6c1e"],
Cell[895, 30, 315, 8, 32, "Input", "ExpressionUUID" -> \
"f58ae2d9-733f-44f5-919b-113a9fcc67e0"],
Cell[1213, 40, 383, 10, 32, "Input", "ExpressionUUID" -> \
"36e97364-8665-42be-8915-4ebd94f96123"],
Cell[CellGroupData[{
Cell[1621, 54, 234, 4, 65, "Chapter", "ExpressionUUID" -> \
"73c30a1f-6aac-4f7d-a755-78e30c5bc0e4"],
Cell[CellGroupData[{
Cell[1880, 62, 175, 3, 63, "Subchapter", "ExpressionUUID" -> \
"b358d265-46d4-4889-9373-3a73490222a4"],
Cell[2058, 67, 420, 8, 49, "Text", "ExpressionUUID" -> \
"ea25f1a9-f004-4778-9310-b95b0ef919fa"],
Cell[CellGroupData[{
Cell[2503, 79, 673, 13, 54, "Input", "ExpressionUUID" -> \
"e19b2d14-cab8-4489-a76c-4d623190a75b"],
Cell[3179, 94, 2403, 46, 132, "Output", "ExpressionUUID" -> \
"d2a25f69-8a5d-43e2-86be-8e098f350f70"]
}, Open  ]],
Cell[5597, 143, 248, 6, 30, "Text", "ExpressionUUID" -> \
"bac82004-ec06-4064-870b-a235fe341482"],
Cell[CellGroupData[{
Cell[5870, 153, 3049, 46, 54, "Input", "ExpressionUUID" -> \
"57beec85-fb88-4b08-a3fd-0aa3deac5b9c"],
Cell[8922, 201, 175, 3, 32, "Output", "ExpressionUUID" -> \
"0445f292-6242-4b17-99b6-0c51c8c73314"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[9146, 210, 279, 4, 63, "Subchapter", "ExpressionUUID" -> \
"58850438-a23b-4e20-bf53-e33332202e2a"],
Cell[CellGroupData[{
Cell[9450, 218, 172, 3, 64, "Section", "ExpressionUUID" -> \
"895d6b34-5f81-45e3-82b5-e0cad07d01d0"],
Cell[CellGroupData[{
Cell[9647, 225, 6807, 108, 117, "Input", "ExpressionUUID" -> \
"fd1fd691-c10e-4522-804e-3cbfc007e426"],
Cell[16457, 335, 153, 3, 32, "Output", "ExpressionUUID" -> \
"f2f404a7-ac75-4ca0-88d4-3d236b3f2188"],
Cell[16613, 340, 135, 3, 32, "Output", "ExpressionUUID" -> \
"9ca876f0-b8d0-4992-ae8c-b5934f2aa65c"],
Cell[16751, 345, 134, 3, 32, "Output", "ExpressionUUID" -> \
"d5c63f05-b898-479f-9989-ec3c9ebfbe6b"],
Cell[16888, 350, 134, 3, 32, "Output", "ExpressionUUID" -> \
"d4cbe26b-eafe-4be8-a7b8-494c66e45820"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[17071, 359, 175, 3, 64, "Section", "ExpressionUUID" -> \
"2a63eff9-bf61-41e4-8473-49c46fc625d1"],
Cell[17249, 364, 1717, 43, 180, "Input", "ExpressionUUID" -> \
"845b9091-3ac4-4ca6-8a11-912d118cb551"]
}, Open  ]],
Cell[CellGroupData[{
Cell[19003, 412, 271, 4, 64, "Section", "ExpressionUUID" -> \
"6261eab6-d79b-4e34-9781-a7915c48b022"],
Cell[19277, 418, 2760, 73, 222, "Input", "ExpressionUUID" -> \
"9455d836-76ca-4f66-a690-300897c3bcdc"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[22086, 497, 163, 3, 63, "Subchapter", "ExpressionUUID" -> \
"b6f9fc7b-9a38-484d-87ca-13064a3af765"],
Cell[CellGroupData[{
Cell[22274, 504, 605, 19, 32, "Input", "ExpressionUUID" -> \
"d17cac46-e4de-4da7-a61f-1cb4a32a801f"],
Cell[22882, 525, 1133, 21, 32, "Output", "ExpressionUUID" -> \
"8beab361-9f89-40b8-b533-198c8627640f"]
}, Open  ]],
Cell[24030, 549, 212, 5, 30, "Text", "ExpressionUUID" -> \
"15846ffc-88f8-4158-85ff-ad39d0a809ce"],
Cell[24245, 556, 1066, 34, 180, "Input", "ExpressionUUID" -> \
"1bf0dd88-c76d-41a8-b6a5-4d341d19085c"],
Cell[25314, 592, 193, 2, 30, "Text", "ExpressionUUID" -> \
"ca156e6c-3b38-4a37-a632-840b0eb21501"],
Cell[CellGroupData[{
Cell[25532, 598, 390, 10, 32, "Input", "ExpressionUUID" -> \
"68c3fbb0-ee5d-4a7a-b120-da7ea68bd4f0"],
Cell[25925, 610, 1100, 26, 54, "Output", "ExpressionUUID" -> \
"3d1794ec-b376-42eb-9b89-8f93e9534a04"]
}, Open  ]],
Cell[CellGroupData[{
Cell[27062, 641, 366, 10, 32, "Input", "ExpressionUUID" -> \
"9e1b445f-fb06-476c-94bb-15f46d6ac19e"],
Cell[27431, 653, 645, 12, 32, "Output", "ExpressionUUID" -> \
"342ee311-6765-484f-9a06-ffe35c2f2ad8"]
}, Open  ]],
Cell[28091, 668, 1385, 39, 96, "Input", "ExpressionUUID" -> \
"8257b7e7-d5ab-4e23-975b-f895883d03f3"],
Cell[CellGroupData[{
Cell[29501, 711, 2042, 50, 138, "Input", "ExpressionUUID" -> \
"517ad904-0df8-4055-beaa-73ffdf841ace"],
Cell[31546, 763, 3108, 59, 415, "Output", "ExpressionUUID" -> \
"ad3ce0ba-0494-4926-b19c-7d496beb1ce9"]
}, Open  ]],
Cell[CellGroupData[{
Cell[34691, 827, 3787, 99, 201, "Input", "ExpressionUUID" -> \
"72a5b4e7-99e9-4ac4-b857-5d97a761ae8a"],
Cell[38481, 928, 4766, 97, 366, "Output", "ExpressionUUID" -> \
"ed2f9507-5ce8-459b-a852-c7fc74473705"]
}, Open  ]],
Cell[CellGroupData[{
Cell[43284, 1030, 1086, 23, 180, "Input", "ExpressionUUID" -> \
"9b7405a4-8c32-4d07-b1bb-2206b7832375"],
Cell[44373, 1055, 1237, 28, 54, "Output", "ExpressionUUID" -> \
"4ccdb5db-933b-4d93-ae55-df159c452af1"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[45659, 1089, 162, 3, 63, "Subchapter", "ExpressionUUID" -> \
"810ae84c-84a1-41cd-af5c-70ffc425b04e"],
Cell[45824, 1094, 218, 5, 32, "Input", "ExpressionUUID" -> \
"55b6ad92-0948-4c5a-abf6-0f9a52f9d0e5"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
}
]
*)

